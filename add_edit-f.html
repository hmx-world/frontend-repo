<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Add/Edit</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
        name='viewport' />
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
    <!-- CSS Files -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/light-bootstrap-dashboard.css?v=2.0.0 " rel="stylesheet" />


</head>

<body style="background-color: #9dbcf7;">
    <div id="app">
        <div class="wrapper">


            <div class="main-panel">

                <div class="content">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="card">
                                    <div class="card-header" style="margin-top: 10px;">
                                        <div class="row ">
                                            <div class="col-md-3 ">
                                                <div class="form-group ">
                                                    <a href="add_edit-f.html"> <button type="submit"
                                                            style="border-radius: 0px; margin-top: -20px;   background-color: #A8CFEF;"
                                                            class="form-control btn active">FOR SALE</button></a>
                                                </div>
                                            </div>
                                            <div class="col-md-3 ">
                                                <div class="form-group">
                                                    <a href="add_edit-r.html"> <button type="submit"
                                                            style="border-radius: 0px;  margin-top: -20px; background-color: #FFE066;"
                                                            class="form-control btn">RENTAL</button> </a>

                                                </div>
                                            </div>
                                            <div class="col-md-3 ">
                                                <div class="form-group">
                                                    <a href="add_edit-c.html"> <button type="submit"
                                                            style="border-radius: 0px;  margin-top: -20px; background-color: #99F2A7;"
                                                            class="form-control btn">COMMERCIAL</button></a>

                                                </div>
                                            </div>
                                            <div class="col-md-3 ">
                                                <div class="form-group">
                                                    <a href="add_edit-l.html"> <button type="submit"
                                                            style=" border-radius: 0px;  background-color: #FF8888;  margin-top: -20px;"
                                                            class="form-control btn">LAND</button></a>

                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card-body" style="color: black;">
                                        <form id="propertyform" method="POST">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>Name:</label>
                                                        <input v-model="name" type="text" style="border-radius: 0px;"
                                                            id="name" class="form-control" placeholder="" value="">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>Price:</label>
                                                        <input v-model="price" type="text" style="border-radius: 0px;"
                                                            id="price" class="form-control" placeholder="" value="">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group" style="border-radius: 0px;">
                                                        <label>Building Type</label>
                                                        <select v-model="buildingType" name="" id=""
                                                            style="border-radius: 0px;" id="buildingType"
                                                            class="form-control">
                                                            <option value="Bungalow">Bungalow</option>
                                                            <option value="Duplex">Duplex</option>
                                                            <option value="Mansion"> Mansion</option>
                                                            <option value="3 storey building">3 storey building</option>
                                                            <option value="Much more">Much more</option>

                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6 ">
                                                    <div class="form-group">
                                                        <label>Title: </label>
                                                        <select v-model="Title" name="" id=""
                                                            style="border-radius: 0px;" id="title"
                                                            style="border-radius: 0px;" class="form-control">
                                                            <option value="R/O">R/O</option>
                                                            <option value="Duplex">Duplex</option>
                                                            <option value="Mansion"> Mansion</option>
                                                            <option value="3 storey building">3 storey building</option>
                                                            <option value="Much more">Much more</option>

                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 ">
                                                    <div class="form-group">
                                                        <label>Number of Bedroom</label>
                                                        <input v-model="numberofbedrooms" type="number"
                                                            style="border-radius: 0px;" min="1" class="form-control"
                                                            placeholder="2">
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label>Street Address: </label>
                                                        <input v-model="town" type="text" style="border-radius: 0px;"
                                                            class="form-control" placeholder="" value="">

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6 ">
                                                    <div class="form-group">
                                                        <label>City: </label>
                                                        <select v-model="city" name="" id="" style="border-radius: 0px;"
                                                            class="form-control">
                                                            <option value="Alimosho">Alimosho</option>
                                                            <option value="Ajah">Ajah</option>
                                                            <option value="Ibeju"> Ibeju</option>
                                                            <option value="Ikorodu">Ikorodu</option>
                                                            <option value="Maryland">Maryland</option>
                                                            <option value="Mowe">Mowe</option>
                                                            <option value="Shagamu">Shagamu</option>
                                                            <option value="Surulere">Surulere</option>
                                                            <option value="Lekki">Lekki</option>
                                                            <option value="Fadeyi">Fadeyi</option>

                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 ">
                                                    <div class="form-group ">
                                                        <label>State/Territory: </label>
                                                        <select v-model="state" name="" id=""
                                                            style="border-radius: 0px;" class="form-control">
                                                            <option value="Alimosho">Alimosho</option>
                                                            <option value="Ajah">Ajah</option>
                                                            <option value="Ibeju"> Ibeju</option>
                                                            <option value="Ikorodu">Ikorodu</option>
                                                            <option value="Maryland">Maryland</option>
                                                            <option value="Mowe">Mowe</option>
                                                            <option value="Shagamu">Shagamu</option>
                                                            <option value="Surulere">Surulere</option>
                                                            <option value="Lekki">Lekki</option>
                                                            <option value="Fadeyi">Fadeyi</option>

                                                        </select>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label>Neighbourhood Security: </label>
                                                        <input v-model="neighbourhoodsecurity" type="number"
                                                            style="border-radius: 0px;" class="form-control" min="1"
                                                            max="10" placeholder="2">

                                                    </div>
                                                </div>
                                                <div class="col-md-6 ">
                                                    <div class="form-group ">
                                                        <br><br>
                                                        <p> (1 is least secured. 10 is most secured) </p>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6 pr-1">
                                                    <div class="form-group">
                                                        <label>Land Area (m.sq)</label>
                                                        <input v-model="landarea" type="text"
                                                            style="border-radius: 0px;" class="form-control"
                                                            placeholder="" value="">
                                                    </div>
                                                </div>
                                                <div class="col-md-6 px-1">
                                                    <div class="form-group">
                                                        <label>Site Description:</label>
                                                        <input v-model="sitedescription" type="text"
                                                            style="border-radius: 0px;" class="form-control"
                                                            placeholder="" value="" />
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="col-md-12 pr-1">
                                                    <div class="form-group" style="display: inline-block;">
                                                        <label>Pictures of the property(max 4)</label>
                                                        <div class="row">
                                                            <input ref="file_upload" v-model="imageFile1"
                                                                id="file-upload" style="border-radius: 0px; width: 23%;"
                                                                class="form-control" type="file" />
                                                            <input ref="file_upload1" v-model="imageFile2"
                                                                id="file-upload1"
                                                                style="border-radius: 0px; width: 23%;"
                                                                class="form-control" type="file" />
                                                            <input ref="file_upload2" v-model="imageFile3"
                                                                id="file-upload2"
                                                                style="border-radius: 0px; width: 23%;"
                                                                class="form-control" type="file" />
                                                            <input ref="file_upload3" v-model="imageFile4"
                                                                id="file-upload3"
                                                                style="border-radius: 0px; width: 23%;"
                                                                class="form-control" type="file" />
                                                        </div>
                                                    </div>

                                                </div>


                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="form-group">
                                                            <label>Property Description: </label>
                                                            <textarea v-model="extras" rows="4" cols="80"
                                                                style="border-radius: 0px; height: 100px;"
                                                                class="form-control" placeholder="" value=""></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                                <button @click.prevent="submitToInternet" type="submit"
                                                    class="btn btn-info btn-fill "
                                                    style="width: 100%; cursor: pointer; background-color: #044CBC; "><strong>ADD
                                                        PROPERTY</strong></button>
                                                <div class="clearfix"></div>
                                        </form>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>
</body>
<!--   Core JS Files   -->
<script src="assets/js/core/jquery.3.2.1.min.js" type="text/javascript"></script>
<script src="assets/js/core/popper.min.js" type="text/javascript"></script>
<script src="assets/js/core/bootstrap.min.js" type="text/javascript"></script>
<script src="assets/js/plugins/bootstrap-switch.js"></script>
<!--  Google Maps Plugin    -->
<script src="js/main.js"></script>
<script src="assets/js/plugins/bootstrap-notify.js"></script>
<script src="assets/js/light-bootstrap-dashboard.js?v=2.0.0 " type="text/javascript"></script>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<script>

    let userFormData = new FormData();
    var app = new Vue({
        el: '#app',
        data: {
            name: '',
            price: '',
            buildingType: '',
            numberofbedrooms: '',
            neighbourhoodsecurity: '',
            Title: '',
            landarea: '',
            city: '',
            state: '',
            town: '',
            sitedescription: '',
            imageFile1: '',
            imageFile2: '',
            imageFile3: '',
            imageFile4: '',
            extras: ''
        },
        methods: {
            createFormData() {
                userFormData.append("name", this.name);
                userFormData.append("price", this.price);
                userFormData.append("buildingType", this.buildingType);
                userFormData.append("providerName", localStorage.getItem("providerName"));
                userFormData.append("FirmId", localStorage.getItem("FirmId"));
                userFormData.append("numberofbedrooms", this.numberofbedrooms);
                userFormData.append("neighbourhoodsecurity", this.neighbourhoodsecurity);
                userFormData.append("Title", this.Title);
                userFormData.append("landarea", this.landarea);
                userFormData.append("city", this.city);
                userFormData.append("state", this.state);
                userFormData.append("town", this.town);
                userFormData.append("sitedescription", this.sitedescription);
                userFormData.append("imageFile1", this.$refs.file_upload.files[0]);
                userFormData.append("imageFile2", this.$refs.file_upload1.files[0]);
                userFormData.append("imageFile3", this.$refs.file_upload2.files[0]);
                userFormData.append("imageFile4", this.$refs.file_upload3.files[0]);
                userFormData.append("extras", this.extras);

                return userFormData;
            },
            submitToInternet() {
                alert("Addition of OnSale Property in progress " + this.name + "\nIf no redirection some fields are required");
                axios.defaults.baseURL = 'https://hmxserver.azurewebsites.net/api/';
                axios.post('firm/onsale', this.createFormData(),
                    {
                        headers: {
                            "Authorization": "Bearer " + localStorage.getItem("token").slice(1, -1),
                            "Access-Control-Allow-Origin": "*"
                        }
                    }).catch(function (error) {
                        console.log(error);
                    }).then(response => {
                        console.log(response);
                        window.location = "https://hmx-world.github.io/frontend-repo/firmdashboard.html";
                        localStorage.setItem(
                            "emergencyId",
                            JSON.stringify(response.data.id)
                        );
                    });



            }
        }
    })




</script>

</html>
