<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
  
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Add/Edit Rental</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
    <!-- CSS Files -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/light-bootstrap-dashboard.css?v=2.0.0 " rel="stylesheet" />

</head>

<body style="background-color: #9dbcf7;">
    <div id="app">
    <div class="wrapper">
       
        <div class="main-panel">
           
            <div class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card">
                               <div class="card-header" style="margin-top: 10px;">
                                   <div class="row ">
                                       <div class="col-md-3 " >
                                           <div class="form-group " >
                                             <a href="add_edit-f.html">  <button type="submit" style="border-radius: 0px; margin-top: -20px;   background-color: #A8CFEF;"  class="form-control btn ">FOR SALE</button> </a>
                                           </div>
                                       </div>
                                       <div class="col-md-3 " >
                                           <div class="form-group" >
                                            <a href="add_edit-r.html">    <button type="submit" style="border-radius: 0px;  margin-top: -20px; background-color: #FFE066;"  class="form-control btn active">RENTAL</button></a>

                                           </div>
                                       </div>
                                       <div class="col-md-3 ">
                                           <div class="form-group">
                                            <a href="add_edit-c.html">      <button type="submit" style="border-radius: 0px;  margin-top: -20px; background-color: #99F2A7;"  class="form-control btn">COMMERCIAL</button></a>

                                           </div>
                                       </div>
                                       <div class="col-md-3 ">
                                           <div class="form-group">
                                            <a href="add_edit-l.html">     <button type="submit" style=" border-radius: 0px;  background-color: #FF8888;  margin-top: -20px;" class="form-control btn">LAND</button></a>

                                           </div>
                                       </div>
                                   </div>
                               </div>
                               
                                <div class="card-body" style="color: black;"> 
                                    <form>
                                       <div class="row">
                                           <div class="col-md-12">
                                               <div class="form-group">
                                                   <label>Name:</label>
                                                   <input v-model="name" type="text" style="border-radius: 0px;" class="form-control" placeholder="" value="">
                                               </div>
                                           </div>
                                       </div>
                                       <div class="row">
                                           <div class="col-md-12">
                                               <div class="form-group">
                                                   <label>Price:</label>
                                                   <input v-model="price" type="text" style="border-radius: 0px;" class="form-control" placeholder="" value="">
                                               </div>
                                           </div>
                                       </div>
                                       <div class="row">
                                           <div class="col-md-12">
                                               <div class="form-group" style="border-radius: 0px;">
                                                   <label>Building Type</label>
                                                   <select v-model="buildingType" name="" id="" style="border-radius: 0px;" class="form-control">
                                                       <option value="">Please Select...</option>
                                                       <option value="Bungalow">Bungalow</option>
                                                       <option value="Duplex">Duplex</option>
                                                     <option value="Mansion"> Mansion</option>
                                                     <option value="3 storey building">3 storey building</option>
                                                     <option value="Much more">Much more</option>
                                                   
                                                   </select>                          
                                                        </div>
                                           </div>
                                       </div>
                                       <div class="row">
                                           <div class="col-md-6 " >
                                               <div class="form-group">
                                                   <label>Water Supply: </label>
                                                   <select v-model="watersupply" name="" id="" style="border-radius: 0px;" style="border-radius: 0px;" class="form-control">
                                                       <option value="">Please Select...</option>
                                                       <option value="true">true</option>
                                                       <option value="false">false</option>   
                                                   </select> 
                                               </div>
                                           </div>
                                           <div class="col-md-6 ">
                                               <div class="form-group ">
                                                   <label>Number of Bedroom</label>
                                                   <input v-model="numberofbedrooms" type="number" style="border-radius: 0px;" min="1" class="form-control" placeholder="2">
                                               </div>
                                              
                                           </div>
                                       </div>
                                       <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>Street Address: </label>
                                                <input v-model="town" type="text" style="border-radius: 0px;" class="form-control"  placeholder="" value="">

                                            </div>
                                        </div>
                                    </div>
                                        <div class="row">
                                            <div class="col-md-6 ">
                                                <div class="form-group ">
                                                    <label>State/Territory: </label>
                                                    <select v-model="state"  name=""
                                                            style="border-radius: 0px;" class="form-control">
                                                        <option value="">Please Select...</option>
                                                        <option v-for="(value, key) in selectObj" :value="key" >{{key}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6 ">
                                                <div class="form-group">
                                                    <label>City: </label>
                                                    <select v-model="city" name="" id="" style="border-radius: 0px;"
                                                            class="form-control">
                                                        <option value="">Please Select...</option>
                                                        <option v-for="city in selectObj[state]" :value="city" >{{city}}</option>



                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                      
                                       <div class="row">
                                           <div class="col-md-6 ">
                                               <div class="form-group">
                                                <label>Neighbourhood Security: <span  style="color: black; font-size: 10px;">(1 is least secured. 10 is most secured)</span> </label>
                                                   <input v-model="neighbourhoodsecurity" type="number" style="border-radius: 0px;" class="form-control" min="1" max="10" placeholder="2">

                                               </div>
                                           </div>
                                           <div class="col-md-6 ">
                                               <div class="form-group ">
                                                   <label>Light in 24 Hours:  <span style="color: black; font-size: 10px;">(10 is 24 hours light, 1 is 3 hours light in 24 hours)</span>  </label>
                                                   <input v-model="light24hours" type="number" style="border-radius: 0px;" class="form-control" min="1" max="10" placeholder="2">
                                               </div>
                                              
                                           </div>
                                       </div>
                                        <div class="row">
                                            <div class="col-md-6 pr-1">
                                                <div class="form-group">
                                                    <label>Refundable Caution Deposit:</label>
                                                    <select v-model="refundableCautionDeposit" name="refundableCautionDeposit" id="" style="border-radius: 0px;" class="form-control">
                                                        <option value="" selected></option>
                                                        <option value="True" >True</option>
                                                        <option value="False">False</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6 px-1">
                                                <div class="form-group">
                                                    <label>Refundable Caution Deposit Price:</label>
                                                    <input disabled v-model="refundableCautionDepositPrice" name="refundableCautionDepositPrice" 
                                                    type="text" style="border-radius: 0px;" class="form-control" placeholder="" value="">
                                                </div>
                                            </div>
                                            
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12 pr-1">
                                                <div class="form-group">
                                                    <label>Pictures of the property(max 4)</label>
                                                    <div class="row mt-2 mx-1">
                                                       <div class="form-group col-md-4" >
                                                           <label for="">New Property Image 1<span class="text-danger">*</span></label>
                                                        <input ref="file_upload" v-model="imageFile1"
                                                            id="file-upload" 
                                                            class="form-control" type="file" @change="showImage($event, 'output_image1')"/>
                                                            <img alt="" id="output_image1" width="100%"/>
                                                        </div>
                                                        <div class="form-group col-md-4">
                                                            <label for="">New Property Image 2<span class="text-danger">*</span></label>
                                                        <input ref="file_upload1" v-model="imageFile2"
                                                            id="file-upload1"
                                                            class="form-control" type="file" @change="showImage($event, 'output_image2')"/>
                                                            <img alt="" id="output_image2" width="100%"/>
                                                            </div>
                                                            <div class="form-group col-md-4">
                                                                <label for="">New Property Image 3<span class="text-danger">*</span></label>
                                                        <input ref="file_upload2" v-model="imageFile3" 
                                                            id="file-upload2"
                                                            class="form-control" type="file" @change="showImage($event, 'output_image3')"/>
                                                            <img alt="" id="output_image3" width="100%"/>    
                                                        </div>
                                                            <div class="form-group col-md-4">
                                                                <label for="">New Property Image 4<span class="text-danger">*</span></label>
                                                        <input ref="file_upload3" v-model="imageFile4"
                                                            id="file-upload3" 
                                                            class="form-control" type="file" @change="showImage($event, 'output_image4')"/>
                                                            <img alt="" id="output_image4" width="100%"/>
                                                        </div>
                                                    </div>                               
                                                </div>
                                            </div>
                                           
                                        </div>
                                        
                                       
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label>Property Description: </label>
                                                    <textarea v-model="extras" rows="4" cols="80" style="border-radius: 0px; height: 100px;" class="form-control" placeholder="" value=""></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <button @click.prevent="submitToInternet" type="submit" class="btn btn-info btn-fill " style="width: 100%; background-color: #044CBC; "><strong>ADD PROPERTY</strong></button>
                                        <div class="clearfix"></div>
                                    </form>
                                </div>
                            </div>
                        </div>
                       
                    </div>
                </div>
            </div>
           
        </div>
    </div>
</div>
 
</body>
<!--   Core JS Files   -->
<script src="assets/js/core/jquery.3.2.1.min.js" type="text/javascript"></script>
<script src="assets/js/core/popper.min.js" type="text/javascript"></script>
<script src="assets/js/core/bootstrap.min.js" type="text/javascript"></script>
<!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
<script src="assets/js/plugins/bootstrap-switch.js"></script>
<script src="assets/js/light-bootstrap-dashboard.js?v=2.0.0 " type="text/javascript"></script>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<script>

    let userFormData = new FormData();
  var app = new Vue({
    el: '#app',
    data: {
      name: '',
      price: '',
      buildingType: '',
      numberofbedrooms: '',
      neighbourhoodsecurity: '',
      watersupply: '',
      light24hours: '',
      refundableCautionDeposit: '',
      refundableCautionDepositPrice: '',
      city: '',
      state: '',
      town: '',
      sitedescription: '',
      imageFile1: '',
      imageFile2: '',
      imageFile3: '',
      imageFile4: '',
      extras: '',
        selectCityObj: [],
        selectObj: {
            'Lagos': ['Alimosho','Ajeromi','Ifelodun','Kosofe','Mushin','Oshodi-Isolo','Ojo','Ikorodu','Surulere','Ifako-Ijaiye','Somolu','Amuwo-Odofin','Lagos Mainland','Ikeja','Eti-Osa','Badagry','Apapa','Lagos Island','Epe','Ibeju-Lekki'],
            'Abuja': ['Asokoro','Bamburu','Mararaba','Gwarinpa','Wuse','Maitama','Abuja Airport','Garki','Karu','Kubwa','Kurunduma','Jikwoyi','Masaka','Eketahuna','New Nyanya','Karshi','Yoba','Zuba']
        }
    },
    methods: {
        showImage(event, id){
                let reader = new FileReader();
                reader.onload = () => {
                    let output = document.getElementById(id);
                    output.src = reader.result;

                };
                reader.readAsDataURL(event.target.files[0]);
                this[id] = event.target.files[0];
            },
      createFormData() {
        userFormData.append("name", this.name);
        userFormData.append("price", this.price);
        userFormData.append("buildingType", this.buildingType);
        userFormData.append("providerName", localStorage.getItem("providerName"));
        userFormData.append("FirmId", localStorage.getItem("FirmId"));
        userFormData.append("numberofbedrooms", this.numberofbedrooms);
        userFormData.append("watersupply", this.watersupply);
        userFormData.append("neighbourhoodsecurity", this.neighbourhoodsecurity);
        userFormData.append("light24hours", this.light24hours);
        userFormData.append("refundableCautionDeposit", this.refundableCautionDeposit);
        userFormData.append("refundableCautionDepositPrice", this.refundableCautionDepositPrice);
        userFormData.append("city", this.city);
        userFormData.append("state", this.state);
        userFormData.append("town", this.town);
        userFormData.append("imageFile1", this.$refs.file_upload.files[0]);
        userFormData.append("imageFile2", this.$refs.file_upload1.files[0]);
        userFormData.append("imageFile3", this.$refs.file_upload2.files[0]);
        userFormData.append("imageFile4", this.$refs.file_upload3.files[0]);
        userFormData.append("extras", this.extras);
  
        return userFormData;
      },
      submitToInternet() {
        alert("Addition of Rental Property in progress "+this.name +"\nIf no redirection some fields are required");
        axios.defaults.baseURL = 'https://hmxserver.azurewebsites.net/api/'; 
        axios.post('firm/rental',this.createFormData(),
        {
          headers: {
              "Authorization" : "Bearer "+localStorage.getItem("token").slice(1,-1),
            "Access-Control-Allow-Origin" : "*"
          }
        }).catch(function(error) {
          console.log(error);
        }).then(response => {
            console.log(response);
           window.location="file:///Users/admin/Downloads/hmx/firmdashboard.html";
           localStorage.setItem(
          "emergencyId",
          JSON.stringify(response.data.id)
        );
          });
    
      }
    }
  })
  
  
  </script>
  <script>
      $('[name="refundableCautionDeposit"]').change(function() {
  var price = $('[name="refundableCautionDepositPrice"]');

  var priceEnabled = $(this).val() === "True";
  price.prop("disabled", !priceEnabled)
}).change()
  </script>
</html>
