<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Add/Edit Land</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
    <!-- CSS Files -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/light-bootstrap-dashboard.css?v=2.0.0 " rel="stylesheet" />

</head>

<body style="background-color: #9dbcf7;">
    <div id="app">
    <div class="wrapper">
       
        <div class="main-panel">
           
            <div class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card">
                               <div class="card-header" style="margin-top: 10px;">
                                   <div class="row ">
                                       <div class="col-md-3 ">
                                           <div class="form-group " >
                                             <a href="#">  <button type="submit" style="border-radius: 0px; margin-top: -20px;   background-color: #A8CFEF;"  class="form-control btn ">FOR SALE</button> </a>
                                           </div>
                                       </div>
                                       <div class="col-md-3 " >
                                           <div class="form-group" >
                                            <a href="#">   <button type="submit" style="border-radius: 0px;  margin-top: -20px; background-color: #FFE066;"  class="form-control btn ">RENTAL</button></a>

                                           </div>
                                       </div>
                                       <div class="col-md-3 ">
                                           <div class="form-group">
                                            <a href="#">   <button type="submit" style="border-radius: 0px;  margin-top: -20px; background-color: #99F2A7;"  class="form-control btn ">COMMERCIAL</button></a>

                                           </div>
                                       </div>
                                       <div class="col-md-3 ">
                                           <div class="form-group">
                                            <a href="#">     <button type="submit" style=" border-radius: 0px;  background-color: #FF8888;  margin-top: -20px;" class="form-control btn active">LAND</button> </a>

                                           </div>
                                       </div>
                                   </div>
                               </div>
                               
                                <div class="card-body" style="color: black;"> 
                                    <form>
                                       <div class="row">
                                           <div class="col-md-12">
                                               <div class="form-group">
                                                   <label>Name:</label>
                                                   <input v-model="name" type="text" :value="updatedResponse.name" style="border-radius: 0px;" class="form-control" placeholder="" value="">
                                               </div>
                                           </div>
                                       </div>
                                       <div class="row">
                                           <div class="col-md-12">
                                               <div class="form-group">
                                                   <label>Price:</label>
                                                   <input v-model="price" type="text" style="border-radius: 0px;" class="form-control" placeholder="" value="">
                                               </div>
                                           </div>
                                       </div>
                                      
                                       <div class="row">
                                        <div class="col-md-6 " >
                                            <div class="form-group">
                                                <label>Title: </label>
                                                <select v-model="title" name="" id="" style="border-radius: 0px;" style="border-radius: 0px;" class="form-control">
                                                    <option value="R/O">R/O</option>
                                                    <option value="C/O">C/O</option>
                                                  <option value="Mansion"> Mansion</option>
                                                  <option value="3 storey building">3 storey building</option>
                                                  <option value="Much more">Much more</option>
                                                
                                                </select> 
                                            </div>
                                        </div>
                                        <div class="col-md-6 ">
                                            <div class="form-group">
                                                <label>Land Area (m.sq): </label>
                                                <input v-model="areasize" type="text" style="border-radius: 0px;" class="form-control" placeholder="">
                                            </div>
                                           
                                        </div>
                                    </div>
                                       <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label>Street Address: </label>
                                                <input v-model="town" type="text" style="border-radius: 0px;" class="form-control"  placeholder="" value="">

                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 ">
                                            <div class="form-group">
                                                <label>City: </label>
                                                <select v-model="city" name="" id="" style="border-radius: 0px;" class="form-control">
                                                    <option value="Alimosho">Alimosho</option>
                                                    <option value="Ajah">Ajah</option>
                                                  <option value="Ibeju"> Ibeju</option>
                                                  <option value="Ikorodu">Ikorodu</option>
                                                  <option value="Maryland">Maryland</option>
                                                  <option value="Mowe">Mowe</option>
                                                  <option value="Shagamu">Shagamu</option>
                                                  <option value="Surulere">Surulere</option>
                                                  <option value="Lekki">Lekki</option>
                                                  <option value="Fadeyi">Fadeyi</option>
                                                
                                                </select> 
                                            </div>
                                        </div>
                                        <div class="col-md-6 ">
                                            <div class="form-group ">
                                             <label>State/Territory: </label>
                                             <select v-model="state" name="" id="" style="border-radius: 0px;" class="form-control">
                                                <option value="Alimosho">Alimosho</option>
                                                <option value="Ajah">Ajah</option>
                                              <option value="Ibeju"> Ibeju</option>
                                              <option value="Ikorodu">Ikorodu</option>
                                              <option value="Maryland">Maryland</option>
                                              <option value="Mowe">Mowe</option>
                                              <option value="Shagamu">Shagamu</option>
                                              <option value="Surulere">Surulere</option>
                                              <option value="Lekki">Lekki</option>
                                              <option value="Fadeyi">Fadeyi</option>
                                             
                                             </select> 
                                            </div>
                                           
                                        </div>
                                    </div>
                      
                                        <div class="row">
                                            <div class="col-md-12 pr-1 ">
                                                <div class="form-group">
                                                    <label>Pictures of the property(max 4)</label>
                                                    <div class="row">
                                                    <input ref="file_upload" v-model="imageFile1" id="file-upload" style="border-radius: 0px; width: 23%;"   class="form-control"  type="file"/>
                                                    <input ref="file_upload1" v-model="imageFile2" id="file-upload" style="border-radius: 0px; width: 23%;"   class="form-control"  type="file"/>
                                                    <input ref="file_upload2" v-model="imageFile3" id="file-upload" style="border-radius: 0px; width: 23%;"   class="form-control"  type="file"/>
                                                    <input ref="file_upload3" v-model="imageFile4" id="file-upload" style="border-radius: 0px; width: 23%;"   class="form-control"  type="file"/>
                                                  </div>  
                                                </div>
                                            </div>
                                           
                                        </div>
                                        
                                       
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label>Site Description: </label>
                                                    <textarea v-model="description" rows="4" cols="80" style="border-radius: 0px; height: 150px;" class="form-control" placeholder="" value=""></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <button @click.prevent="submitToInternet" type="submit"
                                        class="btn btn-info btn-fill "
                                        style="width: 100%; cursor: pointer; background-color: #044CBC; "><strong>ADD
                                            PROPERTY</strong></button>                                        <div class="clearfix"></div>
                                    </form>
                                    
                                </div>
                            </div>
                        </div>
                       
                    </div>
                </div>
            </div>
           
        </div>
    </div>
</div>

</body>
<!--   Core JS Files   -->
<script src="assets/js/core/jquery.3.2.1.min.js" type="text/javascript"></script>
<script src="assets/js/core/popper.min.js" type="text/javascript"></script>
<script src="assets/js/core/bootstrap.min.js" type="text/javascript"></script>
<script src="assets/js/plugins/bootstrap-switch.js"></script>
<!--  Google Maps Plugin    -->
<script src="assets/js/light-bootstrap-dashboard.js?v=2.0.0 " type="text/javascript"></script>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



<script>

    let userFormData = new FormData();
  var app = new Vue({
    el: '#app',
    data: {
      updatedResponse: '',
      name: '',
      price: '',
      title: '',
      areasize: '',
      city: '',
      state: '',
      town: '',
      description: '',
      imageFile1: '',
      imageFile2: '',
      imageFile3: '',
      imageFile4: ''
    },
    created()
  {
    let uri = window.location.href.split('?');
    let vars = uri[1].split('=');
    //let params = new URLSearchParams(uri);
    console.log(vars[1]);
    editId = vars[1];
    this.fetchProperty();
  },
  updated(){
  },
    methods: {
        fetchProperty() {
                axios.defaults.baseURL = 'https://hmxserver.azurewebsites.net/api/';
                axios.get('/property/landproperty/' + editId, {
                    headers: {
                        "Authorization": "Bearer " + localStorage.getItem("token").slice(1, -1),
                        "Access-Control-Allow-Origin": "*"
                    }
                }).then(response => {
                    this.updatedResponse = response.data;
                    this.name = this.updatedResponse.name;
                    this.price = this.updatedResponse.price;
                    this.title = this.updatedResponse.title;
                    this.areasize = this.updatedResponse.areaSize;
                    this.city = this.updatedResponse.city;
                    this.state = this.updatedResponse.state;
                    this.town = this.updatedResponse.town;
                    this.description = this.updatedResponse.description;
                    this.imageFile1 = this.updatedResponse.imageFile1;
                    this.imageFile2 = this.updatedResponse.imageFile2;
                    this.imageFile3 = this.updatedResponse.imageFile3;
                    this.imageFile4 = this.updatedResponse.imageFile4;
                    
                    
                });
        },
      
      submitToInternet() {
        alert("Update of Landed Property in progress "+this.name +"\nIf no redirection some fields are required");
        axios.defaults.baseURL = 'https://hmxserver.azurewebsites.net/api/'; 
        axios.post('firm/rental',this.createFormData(),
        {
          headers: {
              "Authorization" : "Bearer "+localStorage.getItem("token").slice(1,-1),
            "Access-Control-Allow-Origin" : "*"
          }
        }).catch(function(error) {
          console.log(error);
        }).then(response => {
            console.log(response);
           //window.location="file:///Users/admin/Downloads/hmx/firmdashboard.html";
          });
    
      }
    },
    
  })
  
  
  </script>
</html>
