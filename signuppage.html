<!DOCTYPE html>
<html lang="en">

<head>
  <title>HMX.World</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
  <link rel="stylesheet" href="css/animate.css">

  <link rel="stylesheet" href="css/owl.theme.default.min.css">

  <link rel="stylesheet" href="css/flaticon.css">
  <link rel="stylesheet" href="css/icomoon.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel = "icon" href =
          "https://svgshare.com/i/N9e.svg"
        type = "image/x-icon">
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@2.4.1/dist/email.min.js"></script>

<!--  <script type="text/javascript">-->
<!--    (function(){-->
<!--      emailjs.init('user_ewg19GGrhR5GQrCsQTsdq');-->
<!--    })();-->
<!--  </script>-->
<!--  <script type="text/javascript">-->
<!--    window.onload = function() {-->
<!--      let user_email = localStorage.getItem("email");-->
<!--      let loginId = localStorage.getItem("loginId");-->
<!--      document.getElementById('contact-form').addEventListener('submit', function(event) {-->
<!--        event.preventDefault();-->
<!--        emailjs.sendForm('hmxmail', 'signup', this);-->
<!--      });-->
<!--    }-->
<!--  </script>-->
</head>

<body class="m-0">
  <div id="app">
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
      <div class="container-fluid px-md-4	">
        <a class="navbar-brand" href="index.html">HMX.World </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav"
          aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="oi oi-menu"></span> Menu
        </button>

        <div class="collapse navbar-collapse" id="ftco-nav">
          <ul class="navbar-nav ml-auto">
<!--            <li class="nav-item active"><a href="index.html" class="nav-link">Home</a></li>-->
            <li class="nav-item"><a href="matchpage.html" class="nav-link">Properties</a></li>
<!--            <li class="nav-item"><a href="nomatchpage.html" class="nav-link">No Properties</a></li>-->
            <li class="nav-item"><a href="planpage.html" class="nav-link">Become a provider</a></li>
            <li class="nav-item"><a href="contactpage.html" class="nav-link">Contact us</a></li>



          </ul>
        </div>
      </div>
    </nav>
    <!-- END nav -->

    <br>
    <br>
    <section class="ftco-section contact-section bg-light">
      <div class="container">
        <div class="row d-flex mb-3 contact-info align-items-center justify-content-center">

        </div>
        <div class="row block-9">
          <div class="col-md-6 order-md-last d-flex">
            <form id="signup-form" class="bg-white p-51 contact-form">

              <div class="form-group">
                <h3 style="color: #044CBC; font-size: 34px; font-weight: bold !important;">Create an account. </h3>
                <p>Give us some of your firm's information to get you all setup</p>
              </div>

              <div class="form-group">
                <i class="fa fa-user input-prefix"></i>
                <p v-if="nameError.length">
                <p class="font-italic text-danger text-decoration-none" v-for="error in nameError">{{ error }}</p>
                </p>
                <input v-model="name"  type="text" class="form-control required" placeholder="Firm's Name" required>
              </div>
              <div class="form-group">
                <p v-if="emailError.length" class="font-italic text-danger text-decoration-none">
                <p class="font-italic text-danger text-" v-for="error in emailError">{{ error }}</p>
                </p>
                <input v-model="email"  type="text" class="form-control" placeholder="Firm's Email" required>
              </div>

              <div class="form-group">
                <p v-if="passwordError.length" class="font-italic text-danger text-decoration-none">
                <p class="font-italic text-danger text-" v-for="error in passwordError">{{ error }}</p>
                </p>
                <input v-model="Password" type="password" class="form-control" placeholder="Password" required>
              </div>

              <div class="form-group">
                <p v-if="locationError.length" class="font-italic text-danger text-decoration-none">
                <p class="font-italic text-danger text-" v-for="error in locationError">{{ error }}</p>
                </p>
                <input v-model="location" type="text" class="form-control" placeholder="Location">
              </div>
              <div class="form-group">
                <p v-if="phoneError.length" class="font-italic text-danger text-decoration-none">
                <p class="font-italic text-danger text-" v-for="error in phoneError">{{ error }}</p>
                </p>
                <input v-model="phoneNumber" type="tel" id="phone"  pattern="[0-9]{3}-[0-9]{3}-[0-9]{5}"
                  class="form-control" placeholder="Firm's Telephone" required>
              </div>
              <div class="form-group">
                <select class="form-control" v-model="Plan">
                  <option value="">Please Select...</option>
                  <option value="Business">Business</option>
                  <option value="Pro">Pro</option>
                  <option value="Premium">Premium</option>
                </select>
              </div>
              <div class="form-group">
                <p v-if="descError.length" class="font-italic text-danger text-decoration-none">
                <p class="font-italic text-danger text-" v-for="error in descError">{{ error }}</p>
                </p>
                <textarea v-model="Description"  id="" cols="30" rows="4" class="form-control"
                  placeholder="Tell us about your company."></textarea>
              </div>
              <div class="form-group">
                <label for="file-upload" class="form-control">
                  <div class="icon" style="position:relative;font-size: 14px;"> Firm's Logo/image <strong
                      style="font-size: 13px;font-weight: 500; color: white; float: right;
                             background-color: #044CBC; margin-right: 7px;  padding: 6px 6px 6px 6px; border-radius: 2px;">Choose file</strong> </div>
                </label>
                <input ref="file_upload" v-model="imageFile1"
                       id="file-upload" class="form-control" type="file"
                  @change="showImage($event, 'output_image')" />
                <img alt="" id="output_image" width="100%" />
              </div>
              <p style="text-align: center; font-size: 13px;">By signing up, you agree to HMX.worldâ€™s <a href="#"
                  style="color: #044CBC;">Terms of <br> Conditions and Privacy Policy </a></p>
              <div class="form-group" v-if="isLoading">
                <div class="lds-ripple" >
                <input @click.prevent="submitToInternet"  type="submit" value="SIGN IN" class="btn py-3 px-5"
                       style=" font-weight: bold;width: 100%;">
                <div></div><div></div></div>
              </div>
              <div class="form-group" v-else>
                <input @click.prevent="submitToInternet"  type="submit" value="SIGN IN" class="btn py-3 px-5"
                  style=" font-weight: bold;width: 100%;">
              </div>
              <div class="form-group">
                <p style="color: black;text-align: center; font-weight: bold;">Already have an account? <a
                    href="loginpage.html" style="color:#044CBC;">Log in</a></p>
              </div>
            </form>

          </div>

          <div class="col-md-6 ">
            <div id="map" class="bg-white" style="margin-top: 150px;">

              <img class="img-fluid" src="images/signuppic.png">
            </div>
          </div>
        </div>
      </div>

  </section>


  <footer class="ftco-footer ftco-bg-dark ftco-section">
    <div class="container">
      <div class="row mb-5">
        <div class="col-md">
          <div class="ftco-footer-widget mb-4">
            <h2 class="ftco-heading-2" style="font-weight: bold; font-size: 18px;"> HMX.World </h2>
            <p> HMX World is a platform that incorporates a matching algorithm and an integrated database system to
              increase the productivity and efficiency of estate firms. Our platform offers estate firms an avenue to
              connect with exact needs and demands of their clients. </p>
            <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-3">
              <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
              <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>

            </ul>
          </div>
        </div>

        <div class="col-md">
          <div class="ftco-footer-widget mb-3 ml-md-4">
            <h2 class="ftco-heading-2" style="font-weight: bold; font-size: 18px;">Useful links</h2>
            <ul class="list-unstyled">

              <li><a href="planpage.html" class="pb-1 d-block">Become a provider</a></li>
              <li><a href="dashboardprofile.html" class="pb-1 d-block">Provider Dashboard</a></li>
              <li><a href="#" class="pb-1 d-block">Privacy Policy</a></li>
              <li><a href="#" class="pb-1 d-block">Terms and Conditions</a></li>
            </ul>
          </div>
        </div>
        <div class="col-md">
          <div class="ftco-footer-widget mb-3 ml-md-4">
            <h2 class="ftco-heading-2" style="font-weight: bold; font-size: 18px;">Contact</h2>

            <ul  class="list-unstyled">
              <li><a href="#"><span class="icon icon-envelope"></span><span
                      class="text">hmxworld@gmail.com</span></a></li>
              <li><a href="#"><span class="icon icon-phone"></span><span class="text">0800-Hmx-World </span></a>
              </li>

            </ul>

          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 text-center">

<!--          <form id="contact-form">-->
<!--            <input type="hidden" name="contact_number">-->
<!--            <label>Name</label>-->
<!--            <input type="text" name="name">-->
<!--            <label>Email</label>-->
<!--            <input type="email" name="user_email">-->
<!--            <label>Message</label>-->
<!--            <textarea name="message"></textarea>-->
<!--            <input type="submit" value="Send">-->
<!--          </form>-->
          <p>
            Copyright &copy; HMX.world-{{currentYear}}
          </p>
        </div>
      </div>
    </div>
  </footer>



  <!-- loader -->
    <div v-if="loading">
      <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
        <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#5A98FF" />
        <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
                stroke="#044CBC" /></svg></div>
    </div>

  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.js"></script>

  <script src="js/main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<script >

    let userFormData = new FormData();

    var app = new Vue({
      el: '#app',
      data: {
        name: '',
        email: '',
        nameError: [],
        passwordError: [],
        emailError: [],
        locationError: [],
        descError: [],
        phoneError: [],
        errors: this.nameError + this.phoneError,
        imageFile1: '',
        phoneNumber: '',
        location: '',
        Description: '',
        Password: '',
        isLoading: false,
        Plan: '',
        sent: false,
        error: false,
      },
      methods: {

        createFormData() {
          userFormData.append("name", this.name);
          userFormData.append("email", this.email);
          userFormData.append("imageFile1", this.$refs.file_upload.files[0]);
          userFormData.append("phoneNumber", this.phoneNumber);
          userFormData.append("location", this.location);
          userFormData.append("Description", this.Description);
          userFormData.append("Password", this.Password);
          userFormData.append("Plan", this.Plan);

          return userFormData;
        },
        showImage(event, id) {
          let reader = new FileReader();
          reader.onload = () => {
            let output = document.getElementById(id);
            output.src = reader.result;
          };
          reader.readAsDataURL(event.target.files[0]);
          this[id] = event.target.files[0];
        },
        validEmail: function (email) {
          let re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
          return re.test(email);
        },
        submitToInternet() {
            console.log('test')
          this.isLoading=true;
          this.nameError = []; this.descError = []; this.emailError = []; this.locationError = [];
          this.phoneError = []; this.passwordError = [];
          if (!this.name) {
            this.nameError.push("Name is required.");
            this.isLoading=false
          }
          if (!this.Password) {
            this.passwordError.push("Password is required.");
            this.isLoading=false;
          }
          if (!this.location) {
            this.locationError.push("Location is required.");
            this.isLoading=false;
          }
          if (!this.phoneNumber) {
            this.phoneError.push("Phone number is required.");
            this.isLoading=false;
          }
          if (!this.Description) {
            this.descError.push("Description is required.");
            this.isLoading=false
          }

          if (!this.email) {
            this.emailError.push('Email required.');
            this.isLoading=false

          } else if (!this.validEmail(this.email)) {
            this.isLoading=false
            this.emailError.push('Valid email required.');
          }

          if (!this.nameError.length && !this.phoneError.length && !this.emailError.length && !this.locationError.length && !this.descError.length && !this.passwordError.length) {

            axios.defaults.baseURL = 'https://hmxserver.azurewebsites.net/api/';
            axios.post('firm/register', this.createFormData(),
                    {
                      headers: {
                        "Access-Control-Allow-Origin": "*"
                      }
                    }).catch(function (error) {
              console.log(error);

            }).then(response => {
              localStorage.setItem(
                      "loginId",
                      JSON.stringify(response.data[0].loginId)
              );
              alert('Login with this id (copy)' + localStorage.getItem("loginId") + ' and your password');
              localStorage.setItem(
                      "UserId",
                      JSON.stringify(response.data[0].id)
              );
              localStorage.setItem(
                      "email",
                      JSON.stringify(this.email)
              );
              window.location = "https://hmx-world.github.io/frontend-repo/loginpage.html";
            }).finally(() => {
              this.isLoading = false;
            })


          } return true;

        }

      },
        computed: {
          currentYear() {
            return new Date().getFullYear();
          }
        },
    })
  </script>
  </div>
</body>

</html>
