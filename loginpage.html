<!DOCTYPE html>
<html lang="en">

<head>
  <title>HMX.World</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
  <link rel="stylesheet" href="css/animate.css">

  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <link rel="stylesheet" href="css/owl.theme.default.min.css">
  <link rel="stylesheet" href="css/magnific-popup.css">

  <link rel="stylesheet" href="css/aos.css">

  <link rel="stylesheet" href="css/ionicons.min.css">

  <link rel="stylesheet" href="css/bootstrap-datepicker.css">
  <link rel="stylesheet" href="css/jquery.timepicker.css">
  <link rel="stylesheet" href="css/flaticon.css">
  <link rel="stylesheet" href="css/icomoon.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel = "icon" href =
          "https://svgshare.com/i/N9e.svg"
        type = "image/x-icon">
</head>

<body class="m-0">
  <div id="app">
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
      <div class="container-fluid px-md-4	">
        <a class="navbar-brand" href="index.html">HMX.World </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav"
          aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="oi oi-menu"></span> Menu
        </button>

        <div class="collapse navbar-collapse" id="ftco-nav">
          <ul class="navbar-nav ml-auto">
<!--            <li class="nav-item active"><a href="index.html" class="nav-link">Home</a></li>-->
            <li class="nav-item"><a href="matchpage.html" class="nav-link">Properties</a></li>
<!--            <li class="nav-item"><a href="nomatchpage.html" class="nav-link">No Properties</a></li>-->
            <li class="nav-item"><a href="planpage.html" class="nav-link">Become a provider</a></li>
            <li class="nav-item"><a href="contactpage.html" class="nav-link">Contact us</a></li>

          </ul>
        </div>
      </div>
    </nav>
    <!-- END nav -->

    <br>
    <br>
    <section class="ftco-section contact-section bg-light">
      <div class="container">

        <div class="row block-9">
          <div class="col-md-6 order-md-last d-flex">
            <form action="#" class="bg-white p-5 contact-form">

              <div class="form-group">
                <h3 style="color: #044CBC; font-size: 34px; font-weight: bold !important;">Welcome - Login </h3>
              </div>
              <div class="form-group">
                <p v-if="nameError.length">
                <p class="font-italic text-danger text-decoration-none" v-for="error in nameError">{{ error }}</p>
                </p>
              </div>
              <div class="form-group">
                <input v-model="loginId" type="text" class="form-control" placeholder="Login id" required>
              </div>
              <div class="form-group">
                <p v-if="passwordError.length" class="font-italic text-danger text-decoration-none">
                <p class="font-italic text-danger text-" v-for="error in passwordError">{{ error }}</p>
                </p>
                <input v-model="password" type="password" class="form-control" placeholder="Password" required>
              </div>
              <div class="form-group" v-if="isLoading">
                <div class="lds-ripple">
                  <input @click.prevent="submitToInternet" type="submit" value="SIGN IN" class="btn btn-primary py-3 px-5"
                         style=" font-weight: bold;width: 100%;">
                  <div></div><div></div></div>
              </div>
              <div class="form-group" v-else>
                  <input @click.prevent="submitToInternet" type="submit" value="SIGN IN" class="btn btn-primary py-3 px-5"
                         style=" font-weight: bold;width: 100%;">
              </div>

              <div class="form-group">
                <p style="color: black;">Don't have an account? <a href="signuppage.html" style="color:#044CBC;">Create
                    an account</a></p>
              </div>
            </form>

          </div>

          <div class="col-md-6 d-flex">
            <div id="" class="bg-white">

              <img class="img-fluid" src="images/loginpic.png">
            </div>
          </div>
        </div>
      </div>
  </div>
  </div>
  </section>

  <footer class="ftco-footer ftco-bg-dark ftco-section">
    <div class="container">
      <div class="row mb-5">
        <div class="col-md">
          <div class="ftco-footer-widget mb-4">
            <h2 class="ftco-heading-2" style="font-weight: bold; font-size: 18px;"> HMX.World </h2>
            <p> HMX World is a platform that incorporates a matching algorithm and an integrated database system to
              increase the productivity and efficiency of estate firms. Our platform offers estate firms an avenue to
              connect with exact needs and demands of their clients. </p>
            <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-3">
              <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
              <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>

            </ul>
          </div>
        </div>

        <div class="col-md">
          <div class="ftco-footer-widget mb-3 ml-md-4">
            <h2 class="ftco-heading-2" style="font-weight: bold; font-size: 18px;">Useful links</h2>
            <ul class="list-unstyled">

              <li><a href="planpage.html" class="pb-1 d-block">Become a provider</a></li>
              <li><a href="dashboardprofile.html" class="pb-1 d-block">Provider Dashboard</a></li>
              <li><a href="#" class="pb-1 d-block">Privacy Policy</a></li>
              <li><a href="#" class="pb-1 d-block">Terms and Conditions</a></li>
            </ul>
          </div>
        </div>
        <div class="col-md">
          <div class="ftco-footer-widget mb-3 ml-md-4">
            <h2 class="ftco-heading-2" style="font-weight: bold; font-size: 18px;">Contact</h2>

            <ul  class="list-unstyled">
              <li><a href="#"><span class="icon icon-envelope"></span><span
                      class="text">hmxworld@gmail.com</span></a></li>
              <li><a href="#"><span class="icon icon-phone"></span><span class="text">0800-Hmx-World </span></a>
              </li>

            </ul>

          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 text-center">
          <p>
            Copyright &copy; HMX.world-{{currentYear}}
          </p>
        </div>
      </div>
    </div>
  </footer>



  <!-- loader -->
  <div v-if="loading">
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
      <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#5A98FF" />
      <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
        stroke="#044CBC" /></svg></div>
  </div>

  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/jquery.animateNumber.min.js"></script>
  <script src="js/scrollax.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.js"></script>
  <script src="js/main.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

  <script>
    var app = new Vue({
      el: '#app',
      data: {
        loading:true,
        loginId: '',
        password: '',
        nameError: [],
        passwordError: [],
        isLoading: false
      },
      computed: {
        currentYear() {
          return new Date().getFullYear();
        },
      },
      methods: {
        submitToInternet() {
          this.isLoading=true;
          this.nameError = []; this.passwordError = [];
          if (!this.loginId) {
            this.nameError.push("Login Id required.");
            this.isLoading=false;
          }
          if (!this.password){
            this.passwordError.push("Password required.");
            this.isLoading=false;
          }
          if (!this.nameError.length && !this.passwordError.length) {

            axios.defaults.baseURL = 'https://hmxserver.azurewebsites.net/api/';
            axios.post('firm/login',
              {
                loginId: this.loginId,
                password: this.password
              },
              {
                headers: {
                  "Access-Control-Allow-Origin": "*"
                }
              }).catch(function (error) {
                console.log(error);
              this.isLoading = false;
                alert('Correct login Id and Password required');
              }).then(response => {
                console.log(response);
                  if (response.data.length<1){
                  window.location = "https://hmx-world.github.io/frontend-repo/loginpage.html";
                  this.isLoading = false;
                }
                window.location = "https://hmx-world.github.io/frontend-repo/firmdashboard.html";
              localStorage.setItem(
                  "providerName",
                  JSON.stringify(response.data.name)
                );
                localStorage.setItem(
                  "email",
                  JSON.stringify(response.data.email)
                );
                localStorage.setItem(
                  "FirmId",
                  JSON.stringify(response.data.id)
                );
                localStorage.setItem(
                  "token",
                  JSON.stringify(response.data.token)
                );
                console.log(response);
              }).finally(() => {
                this.isLoading = false;
            })
          }
          return true;
        }

      },

    })

  </script>
</body>

</html>
