<!DOCTYPE html>
<html lang="en">

<head>
    <title>HMX.World</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/aos.css">

    <link rel="stylesheet" href="css/ionicons.min.css">

    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">


    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body class="m-0">
<div id="app">
    <div v-if="loading">
        Loading...
        <div class="lds-ripple1" >
            <div></div><div></div></div>
        <div id="ftco-loader" class="show fullscreen">
            <svg class="circular" width="48px" height="48px">
                <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#5A98FF"/>
                <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
                        stroke="#044CBC"/>   </svg>
        </div>
    </div>
    <div v-else>
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
        <div class="container-fluid px-md-4	">
            <a class="navbar-brand" href="index.html">HMX.World </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav"
                    aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="oi oi-menu"></span> Menu
            </button>

            <div class="collapse navbar-collapse" id="ftco-nav">
                <ul class="navbar-nav ml-auto">
<!--                    <li class="nav-item "><a href="index.html" class="nav-link">Home</a></li>-->
                    <li class="nav-item active"><a href="propertiespage.html" class="nav-link">Properties</a></li>
<!--                    <li class="nav-item"><a href="nomatchpage.html" class="nav-link">No Properties</a></li>-->
                    <li class="nav-item"><a href="planpage.html" class="nav-link">Become a provider</a></li>
                    <li class="nav-item"><a href="contactpage.html" class="nav-link">Contact us</a></li>



                </ul>
            </div>
        </div>
    </nav>
    <!-- END nav -->

    <section class="ftco-section testimony-section" style="padding-left: 12px;">
        <div class="container">
            <div class="row justify-content-left mb-4" style="position: relative; left:-11.5%; padding: 0">
                <img alt="" src="images/Ellipse.png" style="position: absolute; z-index:-5; top: 650px;">
            </div>
            <div class="row justify-content-center mb-3">
                <section class="mb-5">
                    <div class="container ">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="heading text-left text-capitalize font-weight-bold py-5">
                                    <h2 style="color: #044CBC; font-weight: bold; margin-left: 10%; text-transform: none; "> &nbsp;{{propertyMatch.length+' match(es) found'}} </h2>
                                </div>
                            </div>
                            <div class="col-lg-6 col-sm-6 " :key="property.id" v-for="property in propertyMatch">
                                <div class="card my-3 my-lg-0 px-1" style="margin-left: 30px;width: 80%;">
                    <span
                            style="position: absolute; background-color: #044CBC; color: white; top: 40px; padding: 10px; margin-left: 10px;">80%
                      MATCH</span>
                                    <a :href="'landdetailspage.html?q='+purpose+'&id='+property.id">
                                        <img class="card-img-top img-fluid"
                                             style="height: 380px;" v-if="property.imageLink1=='#' || property.imageLink1==null "
                                             src="images/defaultprop.jpg" class="img-fluid w-80 h-80" alt="Card image cap">
                                        <img class="card-img-top img-fluid" style="height: 380px;" v-else  :src="property.imageLink1" class="img-fluid w-80 h-80" alt="Card image cap">
                                    </a>
                                    <div class="card-body bg-white text">
                                        <a :href="'landdetailspage.html?q='+purpose+'&id='+property.id">
                                            <h5 class="card-title">{{property.name}}</h5>
                                            <p class="card-text" style="color: #044CBC ; padding: 0; font-weight: bold;"> â‚¦{{property.price.toLocaleString()}} </p>
                                            <p class="card-text" style="color: black ; padding: 0; font-weight: bold;">{{property.numberOfBedrooms}} bedrooms <br>
                                                {{property.buildingType}} <br>
                                                {{property.city}} {{property.state}}</p>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <div class="row ftco-animate">

                <div class="row lg-12 ellipse ellipseright">
                    <img src="images/ellipse2.svg">
                </div>
            </div>

        </div>

    </section>

    <footer class="ftco-footer ftco-bg-dark ftco-section">
        <div class="container">
            <div class="row mb-5">
                <div class="col-md">
                    <div class="ftco-footer-widget mb-4">
                        <h2 class="ftco-heading-2" style="font-weight: bold; font-size: 18px;"> HMX.World </h2>
                        <p> HMX World is a platform that incorporates a matching algorithm and an integrated database system to
                            increase the productivity and efficiency of estate firms. Our platform offers estate firms an avenue to
                            connect with exact needs and demands of their clients. </p>
                        <ul class="ftco-footer-social  float-md-left float-lft mt-3">
                            <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
                            <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>

                        </ul>
                    </div>
                </div>


                <div class="col-md">
                    <div class="ftco-footer-widget mb-3 ml-md-4">
                        <h2 class="ftco-heading-2" style="font-weight: bold; font-size: 18px;">Useful links</h2>
                        <ul class="list-unstyled">
                            <li><a href="#" class="pb-1 d-block">Home</a></li>
                            <li><a href="planpage.html" class="pb-1 d-block">Become a provider</a></li>
                            <li><a href="propertiespage.html" class="pb-1 d-block">Properties</a></li>
                            <li><a href="#" class="pb-1 d-block">About</a></li>
                            <li><a href="dashboardprofile.html" class="pb-1 d-block">Provider Dashboard</a></li>
                            <li><a href="#" class="pb-1 d-block">Privacy Policy</a></li>
                            <li><a href="#" class="pb-1 d-block">Terms and Conditions</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-md">
                    <div class="ftco-footer-widget mb-3">
                        <h2 class="ftco-heading-2" style="font-weight: bold; font-size: 18px;">Contact</h2>
                        <div class="block-23 mb-3">
                            <ul style="list-style: none;">
                                <li><a href="#"><span class="icon icon-envelope"></span><span
                                        class="text">hmxworld@gmail.com</span></a></li>
                                <li><a href="#"><span class="icon icon-phone"></span><span class="text">0800-Hmx-World </span></a>
                                </li>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 text-left">

                    <p>
                        Copyright &copy; HMX.world-{{currentYear}}

                    </p>
                </div>
            </div>
        </div>
    </footer>




</div>
</div>
</body>

<script src="js/jquery.min.js"></script>
<script src="js/jquery-migrate-3.0.1.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/jquery.waypoints.min.js"></script>
<script src="js/jquery.stellar.min.js"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/jquery.magnific-popup.min.js"></script>
<script src="js/aos.js"></script>
<script src="js/jquery.animateNumber.min.js"></script>
<script src="js/scrollax.min.js"></script>

<script src="js/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<script>

    let userFormData = new FormData();
    var app = new Vue({
        el: '#app',
        data: {
            name: '',
            price: '',
            buildingType: '',
            numberofbedrooms: '',
            city: '',
            state: '',
            town: '',
            imageFile1: '',
            propertyMatch: '',
            purpose:'land',
            loading:true

        },
        created() {
            let uri = window.location.href.split('?');
            let vars = uri[1];
            let indi = vars.split('&');

            let firmId= indi[0].split("=")[1];
            let nomatch = indi[1]+'&'+indi[2]+'&'+indi[3]+'&'+indi[4];

            if(indi[0].split("=")[0]==="firmId"){
                let formbody = {
                    firmId: indi[0].split("=")[1],
                    state: indi[1].split("=")[1],
                    city: indi[2].split("=")[1],
                    minPrice: indi[3].split("=")[1].split("-")[0],
                    maxPrice: indi[3].split("=")[1].split("-")[1],
                    area: indi[4].split("=")[1],
                }
                axios.defaults.baseURL = 'https://hmxserver.azurewebsites.net/api/';
                axios.post('/property/landproperty/match/'+firmId, formbody,
                    {
                        headers: {
                            "Authorization": "Bearer " + localStorage.getItem("token").slice(1, -1),
                            "Access-Control-Allow-Origin": "*"
                        }
                    }).then(response => {
                    console.log(response.data);
                    this.propertyMatch = response.data;
                    if (this.propertyMatch.length<1){
                        window.location="file:///Users/admin/Downloads/hmx/nolandmatchpage.html?"+nomatch;
                    }
                });
            }  else if(indi[0].split("=")[0]==="redirect" ){
                let formbody = {
                    state: indi[1].split("=")[1],
                    city: indi[2].split("=")[1],
                    minPrice: indi[3].split("=")[1].split("-")[0],
                    maxPrice: indi[3].split("=")[1].split("-")[1],
                    area: indi[4].split("=")[1],
                }
                axios.defaults.baseURL = 'https://hmxserver.azurewebsites.net/api/';
                axios.post('/property/landproperty/match/', formbody,
                    {
                        headers: {
                            "Authorization": "Bearer " + localStorage.getItem("token").slice(1, -1),
                            "Access-Control-Allow-Origin": "*"
                        }
                    }).then(response => {
                    console.log(response.data);
                    this.propertyMatch = response.data;
                    if (this.propertyMatch.length<1){
                        //window.location="file:///Users/admin/Downloads/hmx/nolandmatchpage.html?"+nomatch;

                    }
                }).finally(() => (this.loading = false))
            }
            else {
                console.log("do nothing");
            }

        },
        updated() {},
        computed: {
            currentYear() {
                return new Date().getFullYear();
            },
        },
        methods: {},

    })


</script>

</html>